#!/usr/bin/env sh
. "${HOME}/.local/bin/common.sh"
import_colors

while read -r file; do
  case "$1" in
    # delete file
    "d")
      if [ "$(menu -p "Really delete ${file}?" <<'EOF'
Yes
No
EOF
      )" = "Yes" ]; then
        rm "${file}"
        notify-send "${file} deleted."
      fi
      ;;
    # rotate clockwise
    "r")
      convert -rotate 90 "${file}" "${file}"
      ;;
    # rotate counter-clockwise
    "R")
      convert -rotate -90 "${file}" "${file}"
      ;;
    # horizontally invert file, aka 'flop' it
    "f")
      convert -flop "${file}" "${file}"
      ;;
    # yank the relative file path
    "y")
      printf '%s' "${file}" | yank
      notify-send "${file} copied to clipboard."
      ;;
    # yank the absolute file path
    "Y")
      readlink -f "${file}" | yank
      notify-send "$(readlink -f "${file}") copied to clipboard."
      ;;
  esac
done
