# stuck 'set my_pass=xxxx' in a file and encrypted it with GnuPG

# it can then be referenced with $my_pass, all without leaving the
# password in plain text on the computer.

# smtp_{url,pass} aren't needed with a working smtpd.conf(5)
# on OpenBSD :)

source "gpg -dq ${HOME}/passwords/emails/email_passwords.txt.gpg |"

source "${XDG_CONFIG_HOME}/neomutt/riseup.txt"
# Here we use the $folder variable that has just been set in the sourced file.
#
# We must set it right now otherwise the 'folder' variable will change in the
# next sourced file.
folder-hook $folder "source ${XDG_CONFIG_HOME}/neomutt/riseup.txt"

source "${XDG_CONFIG_HOME}/neomutt/personal.txt"
folder-hook $folder "source ${XDG_CONFIG_HOME}/neomutt/personal.txt"

subscribe announcements@openbsd.org
subscribe misc@openbsd.org
subscribe ports@openbsd.org

# Make a noise when an error occurs
unset beep

# Automatically PGP sign all outgoing mail
unset crypt_auto_sign

# Encrypt replies to encrypted messages
set crypt_reply_encrypt

# Sign replies to signed messages
set crypt_reply_sign = no

# Sign replies to encrypted messages
set crypt_reply_sign_encrypted = yes

# Use GPGME crypto backend
set crypt_use_gpgme

# strftime format string for the `%d` expando
set date_format = "%F %R"

# Really delete messages
set delete

# Don't prompt for the recipients and subject when replying/forwarding
set fast_reply

# printf-like format string to control the subject when forwarding a message
set forward_format = "Fwd: %s"

# Automatically quote a forwarded message using `$indent_string`
set forward_quote

# (hcache) Directory/file for the header cache database
set header_cache = "${XDG_CACHE_HOME}/neomutt"

# Don't use the hostname, just the domain, when generating the message id
set hidden_host

# Ignore the 'Reply-To' header when using `<reply>` on a mailing list
set ignore_list_reply_to

# (imap) When opening a mailbox, ask the server for a list of subscribed folders
set imap_check_subscribed

# (imap) Reuse an existing IMAP connection to check for new mail
# NOTE: I don't know if this works with multi-account or not
unset imap_passive

# Include a copy of the email that's being replied to
set include

# Number of seconds before NeoMutt checks for new mail
set mail_check = 600

# Periodically calculate message statistics while polling for new mail
set mail_check_stats

# How often to calculate message statistics
set mail_check_stats_interval = 600

# Mark new emails as old when leaving the mailbox
unset mark_old

# Display a '+' at the beginning of wrapped lines in the pager
unset markers

# Folder that receives read emails (see Move)
set mbox = "${HOME}/mail"

# Default type for creating new mailboxes
set mbox_type = "Maildir"

# (imap/pop) Directory for the message cache
set message_cachedir = "${XDG_CACHE_HOME}/neomutt"

# Forward a message as a 'message/RFC822' MIME part
set mime_forward

# Move emails from `$spool_file` to `$mbox` when read
# NOTE: This will mark emails as deleted if folder is remote and mbox is local
unset move

# Don't automatically open the next message when at the end of a message
set pager_stop

# Automatically decrypt PGP messages
set pgp_auto_decode

# Show non-usable keys in the key selection
unset pgp_show_unusable

# (pop) Interval between checks for new mail
set pop_check_interval = 600

# (pop) After downloading POP messages, delete them on the server
unset pop_delete

# Confirm before printing a message
unset print

# Folder to save 'sent' messages
set record = "${HOME}/mail"

# Maximum paragraph width for reformatting 'format=flowed' text
set reflow_wrap = 80

# Decode RFC2047-encoded MIME parameters
set rfc2047_parameters

# (sidebar) Wrap around when searching for the next mailbox with new mail
set sidebar_next_new_wrap

# (sidebar) Show the sidebar
# Can be toggled on and off.
unset sidebar_visible

# (sidebar) Width of the sidebar
set sidebar_width = 15

# Time to pause after certain info messages
set sleep_time = 0

# Sort method for the index
set sort = last-date

# (ssl) Require TLS encryption for all connections
set ssl_force_tls

# Thread messages using 'In-Reply-To' and 'References' headers
set strict_threads

# Whether to use threads for the index
set use_threads = threads

# Prompt to press a key after running external commands
unset wait_key

# Width to wrap text in the pager
set wrap = 80

mailboxes = +INBOX

ignore *
unignore From To Cc Bcc Date Subject
unhdr_order *
hdr_order From: To: Cc: Bcc: Date: Subject:

alternative_order text/plain text/enriched text/html
auto_view application/pgp-encrypted
auto_view text/html

bind index \Cf noop
bind index,pager i noop
bind index,pager,attach g noop

# General rebindings
bind attach l view-text
bind browser h goto-parent
bind browser l select-entry
bind editor <Tab> complete-query
bind editor <space> noop
bind index "^" fetch-mail
bind index D purge-message
bind index L list-reply
bind index U undelete-message
bind index h noop
bind index j next-entry
bind index k previous-entry
bind index l display-message
bind index,attach G last-entry
bind index,attach gg first-entry
bind index,pager \Cb previous-page
bind index,pager \Cf next-page
bind index,pager B sidebar-toggle-visible
bind index,pager S sync-mailbox
bind index,pager \Cj sidebar-next
bind index,pager \Ck sidebar-prev
bind index,pager \Cn sidebar-next-new
bind index,pager \Co sidebar-open
bind index,pager \Cp sidebar-prev-new
bind index,pager p recall-message
bind index,pager,attach R group-reply
bind index,pager,browser d half-down
bind index,pager,browser u half-up
bind index,query <space> tag-entry
bind pager j next-line
bind pager k previous-line
bind pager l view-attachments
bind pager,attach h exit
macro browser h '<change-dir><kill-line>..<enter>' "Go to parent folder"

macro index,pager gp "<sync-mailbox><enter-command>source ${XDG_CONFIG_HOME}/neomutt/personal.txt<enter><change-folder>!<enter>"
macro index,pager ge "<sync-mailbox><enter-command>source ${XDG_CONFIG_HOME}/neomutt/riseup.txt<enter><change-folder>!<enter>"

# Colors
color attachment white default
color bold black default
color error red default
color hdrdefault blue default
color index brightcyan default "~N"
color index cyan default ".*"
color indicator yellow default
color message cyan default
color normal default default
color quoted cyan default
color quoted1 magenta default
color quoted2 blue default
color quoted3 green default
color quoted4 red default
color search brightyellow default
color sidebar_highlight red default
color signature cyan default
color status magenta black
color tilde black default
color underline black default

# Regex highlighting:
color body yellow default "(https?|ftp)://[\-\.,/%~_:?&=\#a-zA-Z0-9]+" # URL
color body yellow default "[\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+" # Email addresses
color body blue default "^gpg: Good signature .*"
color body magenta default "[ ]?[*][^*]*[*][ ]" # more emoticon?
color body magenta default "[ ][*][^*]*[*][ ]?" # more emoticon?
color body magenta default "[;:][)(|]" # emoticons
color body magenta default "[;:][-o][)/(|]" # emoticons
color body underline bold brightyellow default "^gpg: BAD signature from.*"
color body blue default "(Good signature)"
color body underline bold brightyellow default "(BAD signature)"
color body magenta default "\`[^\`]*\`"
#color body magenta default "^(\t| )*(-|\\*) \.*"
color header brightwhite default "^(CC|BCC)"
color header cyan default ".*"
color header brightcyan default "^(From)"
color header brightcyan default "^(Subject)"
