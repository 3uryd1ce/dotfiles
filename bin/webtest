#!/usr/bin/env sh

WEBDIR=/home/ashlen/builds/website
SRVDIR=/var/www/htdocs/amissing.link

sync_and_chmod () {
  rsync -a --partial -q ${WEBDIR}/* ${SRVDIR} \
  && find ${SRVDIR} -type f -execdir chmod 644 "{}" \; \
  && find ${SRVDIR} -type d -execdir chmod 755 "{}" \; \
  && rcctl -f start httpd \
  && printf "web server synced.\\n" \
  || printf "unable to sync web server.\\n" >&2
}

sync_and_chmod
