#!/usr/bin/env sh
set -e

sec_print () {
  printf "%s\\n" "$@"
}

err () {
  sec_print "[$(date +'%Y-%m-%d--%H:%M:%S')]: $*" >&2
  exit 1
}

# lists man page paths from listed sections, shuffles them, and grabs the first
# page (like drawing the top card from a shuffled deck).  Then passes that
# result to man for viewing.

randman () {
  man "$(man -w -k sec~^1\|5\|7\|8$ | sort -R | head -1)"
}

randman || err "Unable to pick a random man page."
