#!/usr/bin/env sh

# disable core dumps
#
# currently there is an issue where mpv(1) reliably dumps a core on
# exit.
#
# see https://marc.info/?t=162020293900011&r=1&w=2

# since this is only an issue on OpenBSD, do an OS check and don't worry
# that it's not POSIX compatible since sh(1) on OpenBSD is secretly
# ksh(1). ironically this makes the script more portable since it will
# only use specific non-POSIX functionality on a system known to support
# it.
#
# shellcheck disable=SC3045
[ "$(uname)" = 'OpenBSD' ] && ulimit -c 0

exec /usr/local/bin/mpv "$@"
