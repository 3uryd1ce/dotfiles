#!/usr/bin/env sh
# shellcheck disable=SC1090,SC2154
library="${HOME}/.local/bin/common.sh"
if [ -r "${library}" ]; then
  . "${library}"
else
  cat >&2 <<EOF
${library} doesn't exist or isn't readable.
${0##*/} may not function correctly without it; exiting for safety.
EOF
  exit 1
fi

# rewrite of Luke Smith's dmenuunicode:
# https://github.com/LukeSmithxyz/voidrice/blob/master/.local/bin/dmenuunicode

# his dotfiles can be accessed here:
# https://github.com/LukeSmithxyz/voidrice

emoji_file="${HOME}/.local/share/emoji"

grab_emoji() {
  chosen="$(cut -d ';' -f1 "${emoji_file}" | menu -l 20)"
  # important to use printf %s here, as ${chosen} is user input
  printf '%s' "${chosen%% *}" | yank
}

main() {
  import_colors
  grab_emoji
}

main
